<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KararLab - Ã–zellik Testi</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="advanced-styles.css">
</head>
<body>
    <div style="padding: 2rem; max-width: 1200px; margin: 0 auto;">
        <h1 style="text-align: center; margin-bottom: 2rem;">ğŸ® KararLab v2.5 - Ã–zellik Testi</h1>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
            <button class="btn-primary btn-full" onclick="testDailyReward()">
                ğŸ GÃ¼nlÃ¼k Ã–dÃ¼l Testi
            </button>
            <button class="btn-primary btn-full" onclick="testAchievement()">
                ğŸ† BaÅŸarÄ± Testi
            </button>
            <button class="btn-primary btn-full" onclick="testShop()">
                ğŸ›’ MaÄŸaza Testi
            </button>
            <button class="btn-primary btn-full" onclick="testLeaderboard()">
                ğŸ“Š Liderlik Testi
            </button>
            <button class="btn-primary btn-full" onclick="testTournament()">
                ğŸ¯ Turnuva Testi
            </button>
            <button class="btn-primary btn-full" onclick="testLevelUp()">
                â¬†ï¸ Seviye Atlama Testi
            </button>
        </div>
        
        <div style="background: var(--card-bg); padding: 2rem; border-radius: 16px; margin-bottom: 2rem;">
            <h2>Test KullanÄ±cÄ±sÄ± OluÅŸtur</h2>
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <input type="text" id="test-username" placeholder="KullanÄ±cÄ± AdÄ±" style="flex: 1; padding: 0.75rem; border-radius: 8px; border: 2px solid var(--border-color); background: var(--bg-color); color: var(--text-primary);">
                <button class="btn-secondary" onclick="createTestUser()">OluÅŸtur</button>
            </div>
            <div id="test-user-info" style="margin-top: 1rem; color: var(--text-secondary);"></div>
        </div>
        
        <div style="background: var(--card-bg); padding: 2rem; border-radius: 16px;">
            <h2>Test SonuÃ§larÄ±</h2>
            <div id="test-results" style="margin-top: 1rem; font-family: monospace; color: var(--text-secondary);"></div>
        </div>
    </div>
    
    <script src="confetti.js"></script>
    <script src="sound-system.js"></script>
    <script src="app.js"></script>
    <script src="daily-rewards.js"></script>
    <script src="achievements.js"></script>
    <script src="shop-system.js"></script>
    <script src="leaderboard.js"></script>
    
    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('test-results');
            const time = new Date().toLocaleTimeString();
            const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
            results.innerHTML += `<div style="margin-bottom: 0.5rem;">[${time}] ${icon} ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }
        
        function createTestUser() {
            const username = document.getElementById('test-username').value || 'test_user_' + Date.now();
            
            currentUser = {
                id: Date.now(),
                name: username,
                email: username,
                password: '123456',
                type: 'student',
                level: 1,
                xp: 0,
                coins: 1000,
                scenarios: [],
                achievements: [],
                shopItems: [],
                loginStreak: 0,
                lastLogin: '',
                createdAt: new Date().toISOString()
            };
            
            saveToStorage('currentUser', currentUser);
            
            const users = getFromStorage('users') || [];
            users.push(currentUser);
            saveToStorage('users', users);
            
            document.getElementById('test-user-info').innerHTML = `
                <strong>Test KullanÄ±cÄ±sÄ± OluÅŸturuldu:</strong><br>
                KullanÄ±cÄ±: ${currentUser.name}<br>
                Seviye: ${currentUser.level}<br>
                XP: ${currentUser.xp}<br>
                Coin: ${currentUser.coins}
            `;
            
            log(`Test kullanÄ±cÄ±sÄ± oluÅŸturuldu: ${username}`, 'success');
        }
        
        function testDailyReward() {
            log('GÃ¼nlÃ¼k Ã¶dÃ¼l testi baÅŸlatÄ±lÄ±yor...');
            
            if (!currentUser) {
                log('Ã–nce test kullanÄ±cÄ±sÄ± oluÅŸturun!', 'error');
                return;
            }
            
            try {
                // GÃ¼nlÃ¼k Ã¶dÃ¼l modalÄ±nÄ± gÃ¶ster
                showDailyRewardModal(Math.floor(Math.random() * 7) + 1);
                log('GÃ¼nlÃ¼k Ã¶dÃ¼l modalÄ± gÃ¶sterildi', 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        function testAchievement() {
            log('BaÅŸarÄ± testi baÅŸlatÄ±lÄ±yor...');
            
            if (!currentUser) {
                log('Ã–nce test kullanÄ±cÄ±sÄ± oluÅŸturun!', 'error');
                return;
            }
            
            try {
                const achievements = ['first_login', 'first_game', 'streak_3', 'level_5'];
                const randomAch = achievements[Math.floor(Math.random() * achievements.length)];
                checkAchievement(randomAch);
                log(`BaÅŸarÄ± kazanÄ±ldÄ±: ${randomAch}`, 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        function testShop() {
            log('MaÄŸaza testi baÅŸlatÄ±lÄ±yor...');
            
            if (!currentUser) {
                log('Ã–nce test kullanÄ±cÄ±sÄ± oluÅŸturun!', 'error');
                return;
            }
            
            try {
                showShop();
                log('MaÄŸaza aÃ§Ä±ldÄ±', 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        function testLeaderboard() {
            log('Liderlik tablosu testi baÅŸlatÄ±lÄ±yor...');
            
            try {
                // BirkaÃ§ test kullanÄ±cÄ±sÄ± ekle
                const users = getFromStorage('users') || [];
                for (let i = 0; i < 5; i++) {
                    users.push({
                        id: Date.now() + i,
                        name: `Test User ${i + 1}`,
                        email: `test${i}@test.com`,
                        type: 'student',
                        level: Math.floor(Math.random() * 10) + 1,
                        xp: Math.floor(Math.random() * 1000),
                        coins: Math.floor(Math.random() * 500),
                        scenarios: Array(Math.floor(Math.random() * 20)).fill({}),
                        loginStreak: Math.floor(Math.random() * 7)
                    });
                }
                saveToStorage('users', users);
                
                showLeaderboard();
                log('Liderlik tablosu aÃ§Ä±ldÄ±', 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        function testTournament() {
            log('Turnuva testi baÅŸlatÄ±lÄ±yor...');
            
            try {
                showWeeklyTournament();
                log('Turnuva modalÄ± aÃ§Ä±ldÄ±', 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        function testLevelUp() {
            log('Seviye atlama testi baÅŸlatÄ±lÄ±yor...');
            
            if (!currentUser) {
                log('Ã–nce test kullanÄ±cÄ±sÄ± oluÅŸturun!', 'error');
                return;
            }
            
            try {
                currentUser.level = (currentUser.level || 1) + 1;
                showLevelUpModal(currentUser.level);
                log(`Seviye ${currentUser.level}'e atlandÄ±`, 'success');
            } catch (error) {
                log('Hata: ' + error.message, 'error');
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        log('Test sayfasÄ± hazÄ±r. Ã–nce test kullanÄ±cÄ±sÄ± oluÅŸturun.');
    </script>
</body>
</html>
