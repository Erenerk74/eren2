<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NovaÅŸehir'i sÃ¼rdÃ¼rÃ¼lebilir bir geleceÄŸe taÅŸÄ±yabilir misin? EtkileÅŸimli ÅŸehir planlama simÃ¼lasyonu.">
    <meta name="theme-color" content="#6366f1">
    <title>KararLab - NovaÅŸehir SÃ¼rdÃ¼rÃ¼lebilir Åehir SimÃ¼latÃ¶rÃ¼</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="advanced-styles.css">
    <link rel="stylesheet" href="theme-light.css">
    <link rel="stylesheet" href="mobile-responsive.css">
    <link rel="stylesheet" href="animations.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ™ï¸</text></svg>">
</head>
<body>
    <!-- Ana Sayfa / Landing Page -->
    <div id="landing-page" class="page active">
        <div class="landing-background">
            <div class="gradient-orb orb-1"></div>
            <div class="gradient-orb orb-2"></div>
            <div class="gradient-orb orb-3"></div>
        </div>
        
        <header class="header">
            <div class="logo">KararLab</div>
            <nav class="nav">
                <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <button class="theme-toggle" onclick="toggleSound()" title="Ses AÃ§/Kapat">
                    <span class="sound-icon">ğŸ”Š</span>
                </button>
                <button class="btn-secondary" onclick="showLogin()">GiriÅŸ Yap</button>
                <button class="btn-primary" onclick="showRegister()">KayÄ±t Ol</button>
            </nav>
        </header>

        <section class="hero">
            <div class="hero-badge">ğŸ® EtkileÅŸimli Åehir SimÃ¼latÃ¶rÃ¼</div>
            <h1>NovaÅŸehir'i sÃ¼rdÃ¼rÃ¼lebilir bir geleceÄŸe taÅŸÄ±yabilir misin?</h1>
            <p class="hero-subtitle">Åehir planlama kararlarÄ±nÄ±n etkilerini deneyimle, sÃ¼rdÃ¼rÃ¼lebilirlik becerilerini geliÅŸtir</p>
            <div class="hero-buttons">
                <button class="btn-large btn-primary" onclick="showRegister()">
                    <span>Hemen BaÅŸla</span>
                    <span class="btn-arrow">â†’</span>
                </button>
                <button class="btn-large btn-secondary" onclick="startDemo()">Demo Oyna</button>
            </div>
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Karar Turu</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">6</div>
                    <div class="stat-label">GÃ¶sterge</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âˆ</div>
                    <div class="stat-label">OlasÄ±lÄ±k</div>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="feature-card stagger-item hover-lift">
                <div class="feature-icon floating">ğŸŒ±</div>
                <h3>SÃ¼rdÃ¼rÃ¼lebilirlik</h3>
                <p>Ã‡evre, ekonomi ve sosyal yaÅŸam dengesini Ã¶ÄŸren</p>
            </div>
            <div class="feature-card stagger-item hover-lift">
                <div class="feature-icon floating">ğŸ™ï¸</div>
                <h3>Åehir Planlama</h3>
                <p>GerÃ§ek ÅŸehir yÃ¶netimi kararlarÄ±nÄ± simÃ¼le et</p>
            </div>
            <div class="feature-card stagger-item hover-lift">
                <div class="feature-icon floating">ğŸ“Š</div>
                <h3>Veriye DayalÄ± Karar</h3>
                <p>GÃ¶stergelerle kararlarÄ±nÄ±n etkisini gÃ¶r</p>
            </div>
            <div class="feature-card stagger-item hover-lift">
                <div class="feature-icon floating">ğŸ‘¥</div>
                <h3>SÄ±nÄ±f Ä°Ã§i Ã‡alÄ±ÅŸma</h3>
                <p>Grup Ã§alÄ±ÅŸmasÄ± ve tartÄ±ÅŸma iÃ§in ideal</p>
            </div>
        </section>

        <section class="cta-section">
            <h2>Ã–ÄŸretmen misiniz?</h2>
            <p>SÄ±nÄ±fÄ±nÄ±z iÃ§in Ã¶zel raporlar ve grup Ã§alÄ±ÅŸmasÄ± Ã¶zellikleri sizi bekliyor</p>
            <button class="btn-large btn-primary" onclick="showRegister()">Ã–ÄŸretmen HesabÄ± OluÅŸtur</button>
        </section>
    </div>

    <!-- GiriÅŸ EkranÄ± -->
    <div id="login-page" class="page">
        <div class="auth-container">
            <h2>GiriÅŸ Yap</h2>
            <form id="login-form" onsubmit="handleLogin(event)">
                <input type="text" id="login-email" placeholder="KullanÄ±cÄ± AdÄ± veya E-posta" required>
                <input type="password" id="login-password" placeholder="Åifre" required>
                <label class="checkbox-label">
                    <input type="checkbox"> Beni hatÄ±rla
                </label>
                <button type="submit" class="btn-primary btn-full">GiriÅŸ Yap</button>
                <a href="#" class="link" onclick="showPasswordReset(); return false;">Åifremi unuttum</a>
            </form>
            <button class="btn-text" onclick="showLanding()">â† Ana Sayfaya DÃ¶n</button>
        </div>
    </div>

    <!-- Åifre SÄ±fÄ±rlama EkranÄ± -->
    <div id="password-reset-page" class="page">
        <div class="auth-container">
            <h2>Åifre SÄ±fÄ±rlama</h2>
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                KullanÄ±cÄ± adÄ±nÄ±zÄ± girin, yeni ÅŸifrenizi belirleyin.
            </p>
            <form id="password-reset-form" onsubmit="handlePasswordReset(event)">
                <input type="text" id="reset-email" placeholder="KullanÄ±cÄ± AdÄ±" required>
                <input type="password" id="reset-new-password" placeholder="Yeni Åifre" required>
                <input type="password" id="reset-confirm-password" placeholder="Yeni Åifre (Tekrar)" required>
                <button type="submit" class="btn-primary btn-full">Åifreyi SÄ±fÄ±rla</button>
            </form>
            <button class="btn-text" onclick="showLogin()">â† GiriÅŸ SayfasÄ±na DÃ¶n</button>
        </div>
    </div>

    <!-- KayÄ±t EkranÄ± -->
    <div id="register-page" class="page">
        <div class="auth-container">
            <h2>KayÄ±t Ol</h2>
            <form id="register-form" onsubmit="handleRegister(event)">
                <input type="text" id="reg-name" placeholder="Ad Soyad" required>
                <input type="text" id="reg-email" placeholder="KullanÄ±cÄ± AdÄ± (benzersiz olmalÄ±)" required>
                <input type="password" id="reg-password" placeholder="Åifre" required>
                <select id="reg-type" required onchange="toggleTeacherFields()">
                    <option value="">KullanÄ±cÄ± Tipi SeÃ§in</option>
                    <option value="student">Ã–ÄŸrenci</option>
                    <option value="teacher">Ã–ÄŸretmen</option>
                </select>
                <div id="teacher-fields" style="display:none;">
                    <input type="text" id="reg-school" placeholder="Okul AdÄ±">
                    <input type="text" id="reg-branch" placeholder="BranÅŸ">
                </div>
                <label class="checkbox-label">
                    <input type="checkbox" required> KVKK ve gizlilik politikasÄ±nÄ± kabul ediyorum
                </label>
                <button type="submit" class="btn-primary btn-full">KayÄ±t Ol</button>
            </form>
            <button class="btn-text" onclick="showLanding()">â† Ana Sayfaya DÃ¶n</button>
        </div>
    </div>

    <!-- Ã–ÄŸrenci Paneli -->
    <div id="student-panel" class="page">
        <header class="dashboard-header">
            <div class="logo">KararLab</div>
            <div class="user-info">
                <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <span id="student-name"></span>
                <button class="btn-secondary btn-small" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="profile-card">
                <h3>Profilim</h3>
                <p><strong>KullanÄ±cÄ±:</strong> <span id="profile-name"></span></p>
                <p><strong>Tip:</strong> Ã–ÄŸrenci</p>
                <p><strong>Oynanan Senaryo:</strong> <span id="scenarios-played">0</span></p>
                
                <!-- Seviye Sistemi -->
                <div class="level-display">
                    <div class="level-badge" id="player-level">Seviye 1</div>
                    <div class="xp-container">
                        <div class="xp-info">
                            <span>XP: <span id="current-xp">0</span> / <span id="next-level-xp">100</span></span>
                        </div>
                        <div class="xp-bar-container">
                            <div class="xp-bar" id="xp-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="badges" id="student-badges">
                    <span class="badge">ğŸ†</span>
                </div>
                
                <!-- HÄ±zlÄ± EriÅŸim ButonlarÄ± -->
                <div class="quick-actions" style="display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;">
                    <button class="btn-small btn-secondary notification-button" onclick="showNotificationCenter()">
                        ğŸ”” Bildirimler
                        <span class="notification-badge" style="display: none;">0</span>
                    </button>
                    <button class="btn-small btn-secondary" onclick="showPersonalStats()">ï¿½ Ä°stlatistikler</button>
                    <button class="btn-small btn-secondary" onclick="showComparison()">âš–ï¸ KarÅŸÄ±laÅŸtÄ±r</button>
                    <button class="btn-small btn-secondary" onclick="showLeaderboard()">ğŸ† Liderlik</button>
                    <button class="btn-small btn-secondary" onclick="showFriendsPanel()">ğŸ‘¥ ArkadaÅŸlar</button>
                    <button class="btn-small btn-secondary" onclick="startQuiz()">ğŸ§  Quiz</button>
                    <button class="btn-small btn-secondary" onclick="showAchievements()">ğŸ¯ BaÅŸarÄ±lar</button>
                    <button class="btn-small btn-secondary" onclick="showDailyQuests()">ğŸ“… GÃ¶revler</button>
                </div>
            </div>

            <div class="scenarios-section">
                <h3>Yeni Senaryo BaÅŸlat</h3>
                <div class="scenario-card" onclick="startScenario('basic')">
                    <h4>NovaÅŸehir - Temel Senaryo</h4>
                    <p>3 ana tur: UlaÅŸÄ±m, YeÅŸil Alan & Ä°mar, Enerji & AtÄ±k</p>
                    <span class="badge-recommended">Ã–nerilen</span>
                </div>
            </div>

            <div class="classes-section">
                <h3>SÄ±nÄ±fÄ±m</h3>
                <div id="student-class-info"></div>
                <button class="btn-secondary" onclick="showJoinClassModal()">+ SÄ±nÄ±fa KatÄ±l</button>
            </div>

            <div class="reports-section">
                <h3>GeÃ§miÅŸ RaporlarÄ±m</h3>
                <div id="past-reports"></div>
            </div>
        </div>
    </div>

    <!-- Oyun EkranÄ± -->
    <div id="game-screen" class="page">
        <div class="game-container">
            <div class="game-header">
                <div class="logo">KararLab</div>
                <div class="header-actions">
                    <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                        <span class="theme-icon">ğŸŒ™</span>
                    </button>
                    <div class="turn-indicator">
                        <span id="current-turn">Tur 0</span>
                    </div>
                </div>
            </div>

            <div class="game-content">
                <div class="game-main">
                    <div id="game-panel"></div>
                </div>

                <div class="indicators-panel">
                    <h3>GÃ¶stergeler</h3>
                    <div class="indicator">
                        <span>Hava Kalitesi</span>
                        <span class="indicator-value" id="ind-air">Orta</span>
                    </div>
                    <div class="indicator">
                        <span>Trafik YoÄŸunluÄŸu</span>
                        <span class="indicator-value" id="ind-traffic">YÃ¼ksek</span>
                    </div>
                    <div class="indicator">
                        <span>YeÅŸil Alan</span>
                        <span class="indicator-value" id="ind-green">%8</span>
                    </div>
                    <div class="indicator">
                        <span>Karbon Emisyonu</span>
                        <span class="indicator-value" id="ind-carbon">YÃ¼ksek</span>
                    </div>
                    <div class="indicator">
                        <span>YaÅŸam Kalitesi</span>
                        <span class="indicator-value" id="ind-quality">Orta</span>
                    </div>
                    <div class="indicator">
                        <span>Ekonomi</span>
                        <span class="indicator-value" id="ind-economy">BÃ¼yÃ¼yen</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ã–ÄŸretmen Paneli -->
    <div id="teacher-panel" class="page">
        <header class="dashboard-header">
            <div class="logo">KararLab</div>
            <div class="user-info">
                <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <span id="teacher-name"></span>
                <button class="btn-secondary btn-small" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="profile-card">
                <h3>Ã–ÄŸretmen Paneli</h3>
                <p><strong>Ad:</strong> <span id="teacher-profile-name"></span></p>
                <p><strong>Toplam SÄ±nÄ±f:</strong> <span id="total-classes">0</span></p>
                <p><strong>Toplam Ã–ÄŸrenci:</strong> <span id="total-students">0</span></p>
            </div>

            <div class="classes-section">
                <div class="section-header">
                    <h3>SÄ±nÄ±flarÄ±m</h3>
                    <button class="btn-primary" onclick="showCreateClass()">+ Yeni SÄ±nÄ±f</button>
                </div>
                <div id="classes-list"></div>
            </div>
        </div>
    </div>

    <!-- SÄ±nÄ±f Detay EkranÄ± -->
    <div id="class-detail-page" class="page">
        <header class="dashboard-header">
            <div class="logo">KararLab</div>
            <div class="user-info">
                <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <button class="btn-secondary btn-small" onclick="backToTeacherPanel()">â† Geri</button>
                <button class="btn-secondary btn-small" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="profile-card">
                <h2 id="class-detail-name"></h2>
                <p><strong>SÄ±nÄ±f Kodu:</strong> <span id="class-detail-code"></span> 
                    <button class="btn-small btn-secondary" onclick="copyClassCode()">ğŸ“‹ Kopyala</button>
                </p>
                <p><strong>Ã–ÄŸrenci SayÄ±sÄ±:</strong> <span id="class-detail-student-count">0</span></p>
            </div>

            <div class="classes-section">
                <h3>Ã–ÄŸrenci Listesi</h3>
                <div id="class-students-list"></div>
            </div>

            <div class="classes-section">
                <div class="section-header">
                    <h3>SÄ±nÄ±f RaporlarÄ±</h3>
                    <button class="btn-primary" onclick="downloadClassReport()">ğŸ“¥ PDF Ä°ndir</button>
                </div>
                <div id="class-reports"></div>
            </div>
        </div>
    </div>

    <!-- Admin Paneli -->
    <div id="admin-panel" class="page">
        <header class="dashboard-header">
            <div class="logo">KararLab</div>
            <div class="user-info">
                <button class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <span>Admin Panel</span>
                <button class="btn-secondary btn-small" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘¥</div>
                    <div class="stat-info">
                        <h3 id="admin-total-users">0</h3>
                        <p>Toplam KullanÄ±cÄ±</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“</div>
                    <div class="stat-info">
                        <h3 id="admin-total-students">0</h3>
                        <p>Ã–ÄŸrenci</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘¨â€ğŸ«</div>
                    <div class="stat-info">
                        <h3 id="admin-total-teachers">0</h3>
                        <p>Ã–ÄŸretmen</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ®</div>
                    <div class="stat-info">
                        <h3 id="admin-total-scenarios">0</h3>
                        <p>Oynanan Senaryo</p>
                    </div>
                </div>
            </div>

            <div class="classes-section">
                <div class="section-header">
                    <h3>KullanÄ±cÄ± YÃ¶netimi</h3>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn-secondary btn-small" onclick="exportUsersData()">ğŸ“¥ DÄ±ÅŸa Aktar</button>
                        <button class="btn-secondary btn-small" onclick="showAdminStats()">ğŸ“Š DetaylÄ± Ä°statistik</button>
                    </div>
                </div>
                <div id="admin-users-list"></div>
            </div>
        </div>
    </div>

    <!-- SÄ±nÄ±f Kodu GiriÅŸ Modal -->
    <div id="join-class-modal" class="modal">
        <div class="modal-content">
            <h3>SÄ±nÄ±fa KatÄ±l</h3>
            <input type="text" id="join-class-code" placeholder="SÄ±nÄ±f Kodunu Gir (Ã¶rn: KRL-ABC123)" />
            <div class="modal-actions">
                <button class="btn-primary" onclick="joinClass()">KatÄ±l</button>
                <button class="btn-secondary" onclick="closeJoinClassModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <script src="theme.js"></script>
    <script src="sound-system.js"></script>
    <script src="animations.js"></script>
    <script src="app.js"></script>
    <script src="game-advanced.js"></script>
    <script src="quiz-system.js"></script>
    <script src="social-features.js"></script>
    <script src="statistics.js"></script>
    <script src="notifications.js"></script>
</body>
</html>
